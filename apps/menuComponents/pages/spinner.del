import '../../../libs/menu/components/spinner.del';
import '../_variables.del';

String PAGE_DEBUG_SPINNER_ID: 'spinner';
String PAGE_DEBUG_SPINNER_NAME: 'Spinner';

MenuItem[] PageDebugSpinnerItems() {
  Spinner integerSpinner = new Spinner(menuState, "Integer");
  integerSpinner.onChange = (value, it) => LogToInspector($"{it.text}: {value}");

  MenuItem integer = new MenuItem(child: integerSpinner);

  Spinner floatSpinner = new Spinner(
    menuState: menuState, 
    text: "Float",
    fractionalLength: 2
  );
  floatSpinner.onChange = (value, it) => LogToInspector($"{it.text}: {value}");

  MenuItem float = new MenuItem(child: floatSpinner);

  Spinner integerLongSpinner = new Spinner(
    menuState: menuState, 
    text: "Integer with 5 length and default value",
    integralLength: 5,
    defaultValue: 12345
  );
  integerLongSpinner.onChange = (value, it) => LogToInspector($"{it.text}: {value}");

  MenuItem integerLong = new MenuItem(child: integerLongSpinner);

  Spinner floatLongSpinner = new Spinner(
    menuState: menuState, 
    text: "Float with 4+4 length, default value and unit",
    defaultValue: -1234.5678,
    integralLength: 5,
    fractionalLength: 5,
    negative: true,
    unit: '%'
  );
  floatLongSpinner.onChange = (value, it) => LogToInspector($"{it.text}: {value}");

  MenuItem floatLong = new MenuItem(child: floatLongSpinner);

  return [integer, float, integerLong, floatLong];
}

rule: 'Debug/Spinner'
Event.OngoingPlayer
if(menuState.currentPage == PAGE_DEBUG_SPINNER_ID)
{
  menuState.CreatePage(PAGE_DEBUG_SPINNER_NAME, PageDebugSpinnerItems);
}
