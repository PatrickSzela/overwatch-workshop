import '../../../libs/menu/components/text.del';
import '../_variables.del';

String PAGE_DEBUG_COMPONENT_ID: 'component';
String PAGE_DEBUG_COMPONENT_NAME: 'Base Component';

Number[] PageDebugComponentItems() {
  Number[] nonInteractive! = [];
  Number[] interactive! = [];

  for(Number i! = 0; i < 5; i++) {
    nonInteractive += AddComponent(Text.New($"Non-interactive {i + 1}"));

    String label: $"Interactive {i + 1}";
    interactive += AddComponent(Component.New(
      type: ComponentType.Text, 
      label: label,
      onEnter: () => LogToInspector($"{label}: enter"),
      onLeave: () => LogToInspector($"{label}: left"),
      onButtonDown: (button) => LogToInspector($"{label}: {button}​ button down"),
      onButtonUp: (button) => LogToInspector($"{label}: {button}​ button up"),
      onNavigate: (direction) => LogToInspector($"{label}: navigated {direction}"),
      onPrimaryAction: ComponentAction.New(
        description: "Trigger Primary Action", 
        action: () => LogToInspector($"{label}: primary action")
      ),
      onSecondaryAction: ComponentAction.New(
        description: "Trigger Secondary Action", 
        action: () => LogToInspector($"{label}: primary action")
      ),
      onTertiaryAction: ComponentAction.New(
        description: "Trigger Tertiary Action", 
        action: () => LogToInspector($"{label}: primary action")
      ),
      onQuaternaryAction: ComponentAction.New(
        description: "Trigger Quaternary Action", 
        action: () => LogToInspector($"{label}: primary action")
      ),
    ));
  }

  return nonInteractive + [AddComponent(Text.New())] + interactive;
}

rule: 'Player Settings'
Event.OngoingPlayer
if(menuState.pageIds.Contains(PAGE_DEBUG_COMPONENT_ID))
{
  menuState.CreatePage(
    pageId: 'root',
    title: PAGE_DEBUG_COMPONENT_NAME, 
    indexes: PageDebugComponentItems(), 
    descriptions: [
      Description.New("Every possible interaction will be logged to the Workshop Inspector", COLOR_INFO)
    ]
  );
}
